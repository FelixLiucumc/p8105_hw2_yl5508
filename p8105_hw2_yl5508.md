p8105_hw2_yl5508
================
Yifei LIU
2023/9/30

It’s a proj for HW2 about DATA WRANGLING.

## Problem 1

### Problem 1.1 DATA CLEANING

`pols_data` is from `pols-month.csv`. Variables are arranged by order of
`year`, `month`, `president`, … .

``` r
pols_data =
  read_csv("./datastore/pols-month.csv") |>
  janitor::clean_names() |>
  separate(mon, into = c("year", "month", "day"), "-") |>
  mutate(month = case_match(
    month,
    "01" ~ "Jan",
    "02" ~ "Feb",
    "03" ~ "Mar",
    "04" ~ "Apr",
    "05" ~ "May",
    "06" ~ "Jun",
    "07" ~ "JUl",
    "08" ~ "Aug",
    "09" ~ "Sep",
    "10" ~ "Oct",
    "11" ~ "Nov",
    "12" ~ "Dec"
  )) |>
  #OR using
  #mutate(month = case_when(
  #month == "01" ~ "Jan"), ...)
  mutate(president = case_when(
    prez_gop != "0" ~ "gop",
    prez_dem != "0" ~ "dem"
  )) |>
  select(-c("day", "prez_gop", "prez_dem")) |>
  select(year, month, president, everything())
pols_data
```

    ## # A tibble: 822 × 9
    ##    year  month president gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem
    ##    <chr> <chr> <chr>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
    ##  1 1947  Jan   dem            23      51     253      23      45     198
    ##  2 1947  Feb   dem            23      51     253      23      45     198
    ##  3 1947  Mar   dem            23      51     253      23      45     198
    ##  4 1947  Apr   dem            23      51     253      23      45     198
    ##  5 1947  May   dem            23      51     253      23      45     198
    ##  6 1947  Jun   dem            23      51     253      23      45     198
    ##  7 1947  JUl   dem            23      51     253      23      45     198
    ##  8 1947  Aug   dem            23      51     253      23      45     198
    ##  9 1947  Sep   dem            23      51     253      23      45     198
    ## 10 1947  Oct   dem            23      51     253      23      45     198
    ## # ℹ 812 more rows

`snp_data` is from `snp.csv`. Variables are arranged by order of `year`,
`month`, `close`.

``` r
snp_data =
  read_csv("./datastore/snp.csv") |>
  janitor::clean_names() |>
  mutate(date = as.Date(date, "%m/%d/%y")) |>
  separate(date, into = c("year", "month", "day"), "-") |>
  mutate(month = case_match(
    month,
    "01" ~ "Jan",
    "02" ~ "Feb",
    "03" ~ "Mar",
    "04" ~ "Apr",
    "05" ~ "May",
    "06" ~ "Jun",
    "07" ~ "JUl",
    "08" ~ "Aug",
    "09" ~ "Sep",
    "10" ~ "Oct",
    "11" ~ "Nov",
    "12" ~ "Dec"
  )) |>
  select(-c("day")) |>
  select(year, month, everything())
snp_data
```

    ## # A tibble: 787 × 3
    ##    year  month close
    ##    <chr> <chr> <dbl>
    ##  1 2015  JUl   2080.
    ##  2 2015  Jun   2063.
    ##  3 2015  May   2107.
    ##  4 2015  Apr   2086.
    ##  5 2015  Mar   2068.
    ##  6 2015  Feb   2104.
    ##  7 2015  Jan   1995.
    ##  8 2014  Dec   2059.
    ##  9 2014  Nov   2068.
    ## 10 2014  Oct   2018.
    ## # ℹ 777 more rows

`unemployment_data` is from `unemployment.csv`. Variables are arranged
by order of `year`, `month`, `unemployment_rate`.

``` r
unemployment_data =
  read_csv("./datastore/unemployment.csv") |>
  janitor::clean_names() |>
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment_rate"
  ) |>
  mutate(month = str_to_title(month)) |>
  select(year, month, everything())
unemployment_data
```

    ## # A tibble: 816 × 3
    ##     year month unemployment_rate
    ##    <dbl> <chr>             <dbl>
    ##  1  1948 Jan                 3.4
    ##  2  1948 Feb                 3.8
    ##  3  1948 Mar                 4  
    ##  4  1948 Apr                 3.9
    ##  5  1948 May                 3.5
    ##  6  1948 Jun                 3.6
    ##  7  1948 Jul                 3.6
    ##  8  1948 Aug                 3.9
    ##  9  1948 Sep                 3.8
    ## 10  1948 Oct                 3.7
    ## # ℹ 806 more rows

### Problem 1.2 JOINING DATASETS

``` r
pols =
  read_csv("./datastore/pols-month.csv") |>
  janitor::clean_names() |>
  mutate(president = case_when(
    prez_gop != "0" ~ "gop",
    prez_dem != "0" ~ "dem"
  )) |>
  select(-c("prez_gop", "prez_dem")) |>
  select(date = mon, president, everything())


snp =
  read_csv("./datastore/snp.csv") |>
  janitor::clean_names() |>
  mutate(date = as.Date(date, "%m/%d/%y")) |>
  select(date, everything())

unemployment =
  read_csv("./datastore/unemployment.csv") |>
  janitor::clean_names() |>
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment_rate"
  ) |>
  mutate(month = str_to_title(month)) |>
  select(year, month, everything())






pols_snp = left_join(pols_data, snp_data, by = c("year", "month")) |>
  mutate(year = sort(year, decreasing = TRUE)) |>
  select(year, month, president, close, everything())
```
