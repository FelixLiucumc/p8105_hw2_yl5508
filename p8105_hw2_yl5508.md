p8105_hw2_yl5508
================
Yifei LIU
2023/9/30

It’s a proj for HW2 about DATA WRANGLING.

## Problem 1

### Problem 1.1 DATA CLEANING

`pols_data` is from `pols-month.csv`. Variables are arranged by order of
`year`, `month`, `president`, … .

``` r
pols_data =
  read_csv("./datastore/pols-month.csv") |>
  janitor::clean_names() |>
  separate(mon, into = c("year", "month", "day"), "-") |>
  mutate(month = month.name[as.numeric(month)]) |>
  mutate(year_month = paste(year, month, sep = "-")) |>
  #the same as
  #mutate(month = case_match(month, case_match(month,"01"~"Jan"), ...)
  #OR using
  #mutate(month = case_when(month=="01"~"Jan"), ...)
  mutate(president = case_when(
    prez_gop != "0" ~ "gop",
    prez_dem != "0" ~ "dem"
  )) |>
  select(-c("day", "prez_gop", "prez_dem")) |>
  select(year_month, year, month, president, everything())
head(pols_data, 5)
```

    ## # A tibble: 5 × 10
    ##   year_month    year  month    president gov_gop sen_gop rep_gop gov_dem sen_dem
    ##   <chr>         <chr> <chr>    <chr>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
    ## 1 1947-January  1947  January  dem            23      51     253      23      45
    ## 2 1947-February 1947  February dem            23      51     253      23      45
    ## 3 1947-March    1947  March    dem            23      51     253      23      45
    ## 4 1947-April    1947  April    dem            23      51     253      23      45
    ## 5 1947-May      1947  May      dem            23      51     253      23      45
    ## # ℹ 1 more variable: rep_dem <dbl>

`snp_data` is from `snp.csv`. Variables are arranged by order of `year`,
`month`, `close`.

``` r
snp_data =
  read_csv("./datastore/snp.csv") |>
  janitor::clean_names() |>
  separate(date, into = c("month", "day", "year"), "/") |>
  mutate(year = str_replace_all((ifelse(year >= 30 & year <= 99,  paste("19", year), paste("20", year))),"[^0-9]", "")) |>
  mutate(month = month.name[as.numeric(month)]) |>
  mutate(year_month = paste(year, month, sep = "-")) |>
  select(-day) |>
  select(year_month, year, month, everything())
head(snp_data, 5)
```

    ## # A tibble: 5 × 4
    ##   year_month year  month close
    ##   <chr>      <chr> <chr> <dbl>
    ## 1 2015-July  2015  July  2080.
    ## 2 2015-June  2015  June  2063.
    ## 3 2015-May   2015  May   2107.
    ## 4 2015-April 2015  April 2086.
    ## 5 2015-March 2015  March 2068.

`unemployment_data` is from `unemployment.csv`. Variables are arranged
by order of `year`, `month`, `unemployment_rate`.

``` r
unemployment_data =
  read_csv("./datastore/unemployment.csv") |>
  janitor::clean_names() |>
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "unemployment_rate"
  ) |>
  mutate(month = month.name[match(str_to_title(month), month.abb)]) |>
  mutate(year_month = paste(year, month, sep = "-")) |>
  select(year_month, year, month, everything())
head(unemployment_data, 5)
```

    ## # A tibble: 5 × 4
    ##   year_month     year month    unemployment_rate
    ##   <chr>         <dbl> <chr>                <dbl>
    ## 1 1948-January   1948 January                3.4
    ## 2 1948-February  1948 February               3.8
    ## 3 1948-March     1948 March                  4  
    ## 4 1948-April     1948 April                  3.9
    ## 5 1948-May       1948 May                    3.5

### Problem 1.2 JOINING DATASETS

``` r
pols_snp = inner_join(pols_data, snp_data, by = "year_month") |>
  rename(year = year.x, month = month.x) |>
  select(year_month, year, month, president, close) |>
  arrange(year)
head(pols_snp, 5)
```

    ## # A tibble: 5 × 5
    ##   year_month    year  month    president close
    ##   <chr>         <chr> <chr>    <chr>     <dbl>
    ## 1 1950-January  1950  January  dem        17.0
    ## 2 1950-February 1950  February dem        17.2
    ## 3 1950-March    1950  March    dem        17.3
    ## 4 1950-April    1950  April    dem        18.0
    ## 5 1950-May      1950  May      dem        18.8

``` r
skimr::skim(pols_snp)
```

|                                                  |          |
|:-------------------------------------------------|:---------|
| Name                                             | pols_snp |
| Number of rows                                   | 786      |
| Number of columns                                | 5        |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_   |          |
| Column type frequency:                           |          |
| character                                        | 4        |
| numeric                                          | 1        |
| \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ |          |
| Group variables                                  | None     |

Data summary

**Variable type: character**

| skim_variable | n_missing | complete_rate | min | max | empty | n_unique | whitespace |
|:--------------|----------:|--------------:|----:|----:|------:|---------:|-----------:|
| year_month    |         0 |             1 |   8 |  14 |     0 |      786 |          0 |
| year          |         0 |             1 |   4 |   4 |     0 |       66 |          0 |
| month         |         0 |             1 |   3 |   9 |     0 |       12 |          0 |
| president     |         0 |             1 |   3 |   3 |     0 |        2 |          0 |

**Variable type: numeric**

| skim_variable | n_missing | complete_rate |   mean |     sd |    p0 |   p25 |    p50 |    p75 |    p100 | hist  |
|:--------------|----------:|--------------:|-------:|-------:|------:|------:|-------:|-------:|--------:|:------|
| close         |         0 |             1 | 472.85 | 543.29 | 17.05 | 83.67 | 137.26 | 932.06 | 2107.39 | ▇▁▂▁▁ |

## Problem 2
